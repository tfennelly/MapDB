
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2014-02-17
 Rendered using Maven Reflow Skin 1.0.0 (http://andriusvelykis.github.com/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Troubleshooting questions | mapdb</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.2.2/spruce/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/bootswatch.css" rel="stylesheet" />
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/reflow-skin.css" rel="stylesheet" />
		
		<link href="http://yandex.st/highlightjs/7.3/styles/github.min.css" rel="stylesheet" />
		
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/lightbox.css" rel="stylesheet" />
		
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/site.css" rel="stylesheet" />
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
<style type="text/css">body,h1,h2,h3,h4,h5,h6,code,pre,input,button,select,textarea,.navbar-search,.navbar-search .search-query,h1 small,h2 small,h3 small,h4 small,h5 small,h6 small,.muted,.navbar .brand,.navbar .brand:hover,.navbar .nav li a,.navbar .navbar-text,.navbar .dropdown-menu li a, div.subnav, div.subnav .nav li a,.btn,legend,.alert-heading{
                font-family:Arial, sans-serif;
                }

                @media (max-width:979px){.navbar .nav-collapse .nav li a .navbar .nav-collapse .nav li a:hover, .navbar-inverse .nav-collapse .nav li a:hover, .nav-collapse .navbar-form,.nav-collapse .navbar-search}{
                font-family:Arial, sans-serif;
                }</style>
		<!-- Google Analytics -->
		<script type="text/javascript">
		
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-42074659-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
		</head>

	<body class="page-faq-problems project-mapdb" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="./"><img src="images/logo.png" border="0" alt="MapDB"/> - java beyond heap</a>
					<div class="nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">MapDB <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="index.html" title="Index">Index </a></li>
									<li><a href="http://www.github.com/jankotek/mapdb" title="Github" class="externalLink">Github </a></li>
									<li><a href="features.html" title="Features">Features </a></li>
									<li><a href="changelog.html" title="Changelog">Changelog </a></li>
									<li><a href="credits.html" title="Credits">Credits </a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">FAQ <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="faq-general.html" title="General">General </a></li>
									<li class="active"><a href="" title="Problems">Problems </a></li>
									<li><a href="faq-performance.html" title="Performance">Performance </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="02-getting-started.html" title="Getting started">Getting started </a></li>
									<li><a href="http://www.youtube.com/watch?v=FdZmyEHcWLI" title="Overview Video" class="externalLink">Overview Video </a></li>
									<li><a href="https://github.com/jankotek/MapDB/tree/master/src/test/java/examples" title="Examples" class="externalLink">Examples </a></li>
									<li><a href="apidocs/index.html" title="JavaDoc">JavaDoc </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="http://groups.google.com/group/mapdb" title="Mail list" class="externalLink">Mail list </a></li>
									<li><a href="https://github.com/jankotek/MapDB/issues" title="Bug tracker" class="externalLink">Bug tracker </a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="page-header">
 <h1 id="troubleshooting_questions">Troubleshooting questions</h1>
</div> 
<p>MapDB uses chained exception so user does not have to write try catch blocks. IOException is usually wrapped in IOError which is unchecked. So please always check root exception in the chain.</p> 
<div class="section"> 
 <h2 id="javalangOutOfMemoryError_Map_failed">java.lang.OutOfMemoryError: Map failed</h2> 
 <p>MapDB can not map file into memory. Make sure you are using latest JVM (7+). This is common problem on Windows (use Linux). Workaround is to use slower RandomAccessFile mode: <tt>DBMaker.newRandomAccessFileDB(file)</tt></p> 
</div> 
<div class="section"> 
 <h2 id="InternalError_Error_AssertionFailedError_IllegalArgumentException_StackOverflowError_and_so_on">InternalError, Error, AssertionFailedError, IllegalArgumentException, StackOverflowError and so on</h2> 
 <p>There was an problem in MapDB. Maybe store was corrupted thanks to an internal error or disk failure. Disabling cache <tt>DBMaker.cacheDisable()</tt> or async writes <tt>DBMaker.asyncWriteDisable()</tt> may workaround the problem. Please <a class="externalLink" href="https://github.com/jankotek/MapDB/issues/new">create new bug report</a> with code to reproduce this issue.</p> 
</div> 
<div class="section"> 
 <h2 id="OutOfMemoryError_GC_overhead_limit_exceeded">OutOfMemoryError: GC overhead limit exceeded</h2> 
 <p>Your app is creating new object instances faster then GC can collect them. This assertion is triggered if Garbage Collection consumes 98% of all CPU time. Tune Instance Cache settings and optimize your serialization. You may also increase heap size by <tt>-Xmx3G</tt> switch. Workaround is to disable this assertion by JVM switch <tt>-XX:-UseGCOverheadLimit</tt></p> 
</div> 
<div class="section"> 
 <h2 id="Can_not_delete_or_rename_db_files_on_Windows">Can not delete or rename db files on Windows</h2> 
 <p>MapDB uses memory mapped files, Windows locks them exclusively and prevents deletion. Solution is to close MapDB properly before JVM exits. Make sure you have lattest JVM. Workaround: Use slower RandomAccessFile mode: <tt>DBMaker.newRandomAccessFileDB(file)</tt> Also restarting Windows may help. </p> 
</div> 
<div class="section"> 
 <h2 id="Computer_becomes_very_slow_during_DB_writes">Computer becomes very slow during DB writes</h2> 
 <p>MapDB uses most of available CPU to speedup writes. Try to insert Thread.sleep(1) into your code, or set lower thread priority.</p> 
</div> 
<div class="section"> 
 <h2 id="File_locking_OverlappingFileLockException_some_IOErrors">File locking, OverlappingFileLockException, some IOErrors</h2> 
 <p>You are trying to open file already opened by another MapDB. Make sure that you <tt>DB.close()</tt> store correctly. Some operating systems (Windows) may leave file lock even after JVM is terminated. You may also try to open database in read-only mode.</p> 
</div> 
<div class="section"> 
 <h2 id="Strange_behavior_in_collections">Strange behavior in collections</h2> 
 <p>Maps and Sets in MapDB should be drop-in replacement for <tt>java.util</tt> collections. So any significant difference is a bug. Please <a class="externalLink" href="https://github.com/jankotek/MapDB/issues/new">create new bug report</a> with code to reproduce issue.</p> 
</div> 
<div class="section"> 
 <h2 id="Hard_to_replicate_issues">Hard to replicate issues</h2> 
 <p>If you ran into hard to replicate problem (race condition, sneak data corruption), I would strongly suggest to record JVM execution with <a class="externalLink" href="http://www.chrononsystems.com/learn-more/products-overview">Chronon</a> and submit the record together with a bug report. Thanks to Chronon we can replicate and fix issues at light speed.</p> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#troubleshooting_questions" title="Troubleshooting questions">Troubleshooting questions <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#javalangOutOfMemoryError_Map_failed" title="java.lang.OutOfMemoryError: Map failed">java.lang.OutOfMemoryError: Map failed</a>
		<li><a href="#InternalError_Error_AssertionFailedError_IllegalArgumentException_StackOverflowError_and_so_on" title="InternalError, Error, AssertionFailedError, IllegalArgumentException, StackOverflowError and so on">InternalError, Error, AssertionFailedError, IllegalArgumentException, StackOverflowError and so on</a>
		<li><a href="#OutOfMemoryError_GC_overhead_limit_exceeded" title="OutOfMemoryError: GC overhead limit exceeded">OutOfMemoryError: GC overhead limit exceeded</a>
		<li><a href="#Can_not_delete_or_rename_db_files_on_Windows" title="Can not delete or rename db files on Windows">Can not delete or rename db files on Windows</a>
		<li><a href="#Computer_becomes_very_slow_during_DB_writes" title="Computer becomes very slow during DB writes">Computer becomes very slow during DB writes</a>
		<li><a href="#File_locking_OverlappingFileLockException_some_IOErrors" title="File locking, OverlappingFileLockException, some IOErrors">File locking, OverlappingFileLockException, some IOErrors</a>
		<li><a href="#Strange_behavior_in_collections" title="Strange behavior in collections">Strange behavior in collections</a>
		<li><a href="#Hard_to_replicate_issues" title="Hard to replicate issues">Hard to replicate issues</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">MapDB</li>
						<li>
							<a href="index.html" title="Index">Index </a>
						</li>
						<li>
							<a href="http://www.github.com/jankotek/mapdb" title="Github" class="externalLink">Github </a>
						</li>
						<li>
							<a href="features.html" title="Features">Features </a>
						</li>
						<li>
							<a href="changelog.html" title="Changelog">Changelog </a>
						</li>
						<li>
							<a href="credits.html" title="Credits">Credits </a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">FAQ</li>
						<li>
							<a href="faq-general.html" title="General">General </a>
						</li>
						<li class="active">
							<a href="#" title="Problems">Problems </a>
						</li>
						<li>
							<a href="faq-performance.html" title="Performance">Performance </a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li>
							<a href="02-getting-started.html" title="Getting started">Getting started </a>
						</li>
						<li>
							<a href="http://www.youtube.com/watch?v=FdZmyEHcWLI" title="Overview Video" class="externalLink">Overview Video </a>
						</li>
						<li>
							<a href="https://github.com/jankotek/MapDB/tree/master/src/test/java/examples" title="Examples" class="externalLink">Examples </a>
						</li>
						<li>
							<a href="apidocs/index.html" title="JavaDoc">JavaDoc </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Support</li>
						<li>
							<a href="http://groups.google.com/group/mapdb" title="Mail list" class="externalLink">Mail list </a>
						</li>
						<li>
							<a href="https://github.com/jankotek/MapDB/issues" title="Bug tracker" class="externalLink">Bug tracker </a>
						</li>
						<li class="nav-header">Author</li>
						<li>
							<a href="http://www.kotek.net/" title="Blog" class="externalLink">Blog </a>
						</li>
						<li>
							<a href="http://www.twitter.com/jankotek" title="Twitter" class="externalLink">Twitter </a>
						</li>
						<li>
							<a href="mailto:jan@kotek.net" title="Email" class="externalLink">Email </a>
						</li>
						<li>
							<a href="http://www.kotek.net" title="About" class="externalLink">About </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote><span class="color-highlight">MapDB</span> provides concurrent Maps, Sets and Queues backed by disk storage or off-heap memory.
It is a fast and easy to use embedded Java database engine. And it is completely free under Apache License.
MapDB is free as speech and free as beer under <a href="https://github.com/jankotek/MapDB/blob/master/license.txt">Apache License 2.0</a>.</blockquote>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 0.9.10-SNAPSHOT. </span><span class="publishDate">Last Published: 2014-02-17. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='http://andriusvelykis.github.com/reflow-maven-skin//js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<script src="http://andriusvelykis.github.com/reflow-maven-skin//js/lightbox.js"></script>
	<script src="http://andriusvelykis.github.com/reflow-maven-skin//js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="http://andriusvelykis.github.com/reflow-maven-skin//js/jquery.ba-bbq.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="http://andriusvelykis.github.com/reflow-maven-skin//js/reflow-skin.js"></script>
	
	</body>
</html>
