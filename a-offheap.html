
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at Aug 2, 2013
 Rendered using Maven Reflow Skin 1.0.0 (http://andriusvelykis.github.com/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Are you running out of memory? | mapdb</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.2.2/cerulean/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/bootswatch.css" rel="stylesheet" />
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/reflow-skin.css" rel="stylesheet" />
		
		<link href="http://yandex.st/highlightjs/7.3/styles/github.min.css" rel="stylesheet" />
		
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/lightbox.css" rel="stylesheet" />
		
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/site.css" rel="stylesheet" />
		<link href="http://andriusvelykis.github.com/reflow-maven-skin//css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
<script src="js/excanvas.js"></script>
<script src="js/js-class.js"></script>
<script src="js/bluff.js"></script>
		<!-- Google Analytics -->
		<script type="text/javascript">
		
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-42074659-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
		</head>

	<body class="page-a-offheap project-mapdb" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="./"><img src="images/logo.png" border="0" alt="MapDB"/> - java beyond heap</a>
					<div class="nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">MapDB <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="index.html" title="Index">Index </a></li>
									<li><a href="http://www.github.com/jankotek/mapdb" title="Github" class="externalLink">Github </a></li>
									<li><a href="features.html" title="Features">Features </a></li>
									<li><a href="credits.html" title="Credits">Credits </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">FAQ <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="faq-general.html" title="General">General </a></li>
									<li><a href="faq-problems.html" title="Problems">Problems </a></li>
									<li><a href="faq-performance.html" title="Performance">Performance </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="intro.html" title="Intro">Intro </a></li>
									<li><a href="http://www.youtube.com/watch?v=FdZmyEHcWLI" title="Overview Video" class="externalLink">Overview Video </a></li>
									<li><a href="https://github.com/jankotek/MapDB/tree/master/src/test/java/examples" title="Examples" class="externalLink">Examples </a></li>
									<li><a href="apidocs/index.html" title="JavaDoc">JavaDoc </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="http://groups.google.com/group/mapdb" title="Mail list" class="externalLink">Mail list </a></li>
									<li><a href="https://github.com/jankotek/MapDB/issues" title="Bug tracker" class="externalLink">Bug tracker </a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<ul id="toc" class="nav">
						<li class="toplevel"><a href="#are_you_running_out_of_memory" title="Are you running out of memory?">Are you running out of memory?</a></li>
						<li class="toplevel"><a href="#Java_beyond_heap" title="Java beyond heap">Java beyond heap</a></li>
						<li class="toplevel"><a href="#How_does_it_work" title="How does it work?">How does it work?</a></li>
						<li class="toplevel"><a href="#Yet_another_NoSQL_database" title="Yet another NoSQL database?">Yet another NoSQL database?</a></li>
						<li class="toplevel"><a href="#Features" title="Features">Features</a></li>
						<li class="toplevel"><a href="#Hello_world" title="Hello world">Hello world</a></li>
						<li class="toplevel"><a href="#What_you_should_know" title="What you should know">What you should know</a></li>
						<li class="toplevel"><a href="#Support" title="Support">Support</a></li>
					</ul>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="page-header">
 <h1 id="are_you_running_out_of_memory">Are you running out of memory?</h1>
</div> 
<div class="source"> 
 <pre>There is easy way to extend your data model to handle billions of objects.
It is so simple you won't even recognize you just went off-heap.
There is no catch, no clustering, no complexity, no extra layers...
... and it is free as a beer under Apache License.
</pre> 
</div> 
<p><b>Warning:</b> benchmarks and text bellow may shock you<b><i>!!!</i></b></p> 
<p>It might be hard to believe technology like this exists. <br /> But keep your mind open <i>.</i> it took more than decade to develop it!<br /> Please give us 10 minutes to convince you there are no boundaries.</p> 
<p>It is still Data and Java, but the way it should be.. ..</p> 
<div class="section"> 
 <h2 id="Java_beyond_heap">Java beyond heap</h2> 
 <p>Java Memory Model is great but has its limits. Create a few billions of objects and your CPU turns to very expensive Garbage Collection truck.</p> 
 <p>What is the solution? Adding more memory? Adding more computers? Or just give in and use C++?</p> 
 <p>Scale-up or scale-out is not always best solution. Thanks to MapDB you can optimize, <b>scale-in and keep Java</b>.</p> 
 <p>MapDB keeps your data off-heap (or on disk). Only small recently used fraction is on heap. Your code <i>sees</i> billions of objects, but only a few dozens are GCable. You can also optimize and compress, so <b>off-heap takes smaller space</b>.</p> 
</div> 
<div class="section"> 
 <h2 id="How_does_it_work">How does it work?</h2> 
 <p>MapDB provides Maps, Sets, Queues and Atomic Variables backed by state of the art <b>database engine</b>. After more than decade of rewrites and optimizations it emerged as <b>alternative memory model to Java heap</b>.</p> 
 <p>TODO benchmark chart with 1E9 items, MapDB versus ConcurrentHashMap</p> 
 <p>Now it is so fast, it even outperforms Java collections.</p> 
</div> 
<div class="section"> 
 <h2 id="Yet_another_NoSQL_database">Yet another NoSQL database?</h2> 
 <p>MapDB existed long before NoSQL term was born (under name JDBM). It was originally developed as an alternative to flat binary files for astronomical desktop application and java applets. As such it had different requirements for complexity, overhead and speed. It evolved separately from other DBs and has strange architecture as result.</p> 
 <p>It nicely combines high-level abstractions usual in Java, with tightly optimized assembly like code. Over time it evolved into fully featured db. Now it has optional ACID transactions, snapshots, concurrency It also includes stuff from ORMs such as serialization or instance cache. All packed into 300KB jar with no other dependencies.</p> 
</div> 
<div class="section"> 
 <h2 id="Features">Features</h2> 
 <ul> 
  <li><p><b>Concurrent</b> - MapDB has record level locking and state-of-art concurrent engine. Its performance scales nearly linearly with number of cores. Data can be written by multiple parallel threads.</p></li> 
  <li><p><b>Fast</b> - MapDB has outstanding performance rivaled only by native DBs. It is result of more than a decade of optimizations and rewrites.</p></li> 
  <li><p><b>ACID</b> - MapDB optionally supports ACID transactions with full MVCC isolation. MapDB uses write-ahead-log or append-only store for great write durability.</p></li> 
  <li><p><b>Flexible</b> - MapDB can be used everywhere from in-memory cache to multi-terabyte database. It also has number of options to trade durability for write performance. This makes it very easy to configure MapDB to exactly fit your needs.</p></li> 
  <li><p><b>Hackable</b> - MapDB is component based, most features (instance cache, async writes, compression) are just class wrappers. It is very easy to introduce new functionality or component into MapDB.</p></li> 
  <li><p><b>SQL Like</b> - MapDB was developed as faster alternative to SQL engine. It has number of features which makes transition from relational database easier: secondary indexes/collections, autoincremental sequential ID, joints, triggers, composite keys</p></li> 
  <li><p><b>Low disk-space usage</b> - MapDB has number of features (serialization, delta key packing) to minimize disk used by its store. It also has very fast compression and custom serializers. We take disk-usage seriously and do not waste single byte.</p></li> 
 </ul> 
 <p>Checkout MapDB overview. TODO link to overview page</p> 
</div> 
<div class="section"> 
 <h2 id="Hello_world">Hello world</h2> 
 <p>MapDB is in Maven Central, add this to your pom file.:</p> 
 <div class="source"> 
  <pre>&lt;dependency&gt;
    &lt;groupId&gt;org.mapdb&lt;/groupId&gt;
    &lt;artifactId&gt;mapdb&lt;/artifactId&gt;
&lt;/dependency&gt;
</pre> 
 </div> 
 <p>And run simple example:</p> 
 <div class="source"> 
  <pre>import org.mapdb.*;
ConcurrentNavigableMap treeMap = DBMaker.newTempTreeMap()

// and now use disk based Map as any other Map
treeMap.put(111,&quot;some value&quot;)
</pre> 
 </div> 
 <p>Now you can follow <a href="intro.html">10 minutes introduction</a></p> 
</div> 
<div class="section"> 
 <h2 id="What_you_should_know">What you should know</h2> 
 <ul> 
  <li><p>Transactions (write-ahead-log) can be disabled with <a class="externalLink" href="http://www.mapdb.org/apidocs/org/mapdb/DBMaker.html#writeAheadLogDisable()">DBMaker.writeAheadLogDisable()</a>, this will speedup writes. However without transactions store gets corrupted easily when not closed correctly.</p></li> 
  <li><p>Keys and values must be immutable. MapDB may serialize them on background thread, put them into instance cache. Modifying an object after it was stored is a bad idea.</p></li> 
  <li><p>MapDB relies on memory mapped files. On 32bit JVM you will need <a class="externalLink" href="http://www.mapdb.org/apidocs/org/mapdb/DBMaker.html#randomAccessFileEnable()">DBMaker.randomAccessFileEnable()</a> configuration option to access files larger than 2GB. This introduces overhead compared to memory mapped files.</p></li> 
  <li><p>MapDB does not run defrag on background. You need to call <tt>DB.compact()</tt> from time to time.</p></li> 
  <li><p>MapDB uses unchecked exceptions. All <tt>IOException</tt> are wrapped into unchecked <tt>IOError</tt>. MapDB has weak error handling and assumes disk failure can not be recovered at runtime. However this does not affects data safety, if you use durable commits.</p></li> 
 </ul> 
</div> 
<div class="section"> 
 <h2 id="Support">Support</h2> 
 <p>There is <a class="externalLink" href="mailto:mapdb@googlegroups.com">mail-group</a> with <a class="externalLink" href="http://groups.google.com/group/mapdb">archive</a>. Ask here support questions such as how do I open db.</p> 
 <p>Anything with stack-trace should go to <a class="externalLink" href="https://github.com/jankotek/MapDB/issues/new">new bug report</a>.</p> 
 <p>Before creating report:</p> 
 <ul> 
  <li><p>check if it is not already fixed in snapshot repository</p></li> 
  <li><p>try alternative configurations (disable cache, disable async write thread)</p></li> 
  <li><p>try to use your own serializer, to make sure problem is not in serializer</p></li> 
 </ul> 
 <p>MapDB is a hobby project and my time is limited.Please always attach code to illustrate/reproduce your problem, so I can fix it efficiently. For hard to reproduce problems I would strongly suggest to record JVM execution with <a class="externalLink" href="http://www.chrononsystems.com/learn-more/products-overview">Chronon</a> and submit the record together with a bug report. This will make sure your bug will get fixed promptly.</p> 
 <p>Last option is to [contact me directly](mailto:jan at kotek dot net). I prefer public bug tracker and mail-group so others can find answers as well. Unless you specify your question as confidential, I may forward it to public mail-group.</p> 
 <p><img src="https://www.google-analytics.com/__utm.gif?utmac=UA-42074659-3&amp;raw=true" alt="Image" /></p> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">MapDB</li>
						<li>
							<a href="index.html" title="Index">Index </a>
						</li>
						<li>
							<a href="http://www.github.com/jankotek/mapdb" title="Github" class="externalLink">Github </a>
						</li>
						<li>
							<a href="features.html" title="Features">Features </a>
						</li>
						<li>
							<a href="credits.html" title="Credits">Credits </a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">FAQ</li>
						<li>
							<a href="faq-general.html" title="General">General </a>
						</li>
						<li>
							<a href="faq-problems.html" title="Problems">Problems </a>
						</li>
						<li>
							<a href="faq-performance.html" title="Performance">Performance </a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li>
							<a href="intro.html" title="Intro">Intro </a>
						</li>
						<li>
							<a href="http://www.youtube.com/watch?v=FdZmyEHcWLI" title="Overview Video" class="externalLink">Overview Video </a>
						</li>
						<li>
							<a href="https://github.com/jankotek/MapDB/tree/master/src/test/java/examples" title="Examples" class="externalLink">Examples </a>
						</li>
						<li>
							<a href="apidocs/index.html" title="JavaDoc">JavaDoc </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Support</li>
						<li>
							<a href="http://groups.google.com/group/mapdb" title="Mail list" class="externalLink">Mail list </a>
						</li>
						<li>
							<a href="https://github.com/jankotek/MapDB/issues" title="Bug tracker" class="externalLink">Bug tracker </a>
						</li>
						<li class="nav-header">Author</li>
						<li>
							<a href="http://www.kotek.net/" title="Blog" class="externalLink">Blog </a>
						</li>
						<li>
							<a href="http://www.twitter.com/jankotek" title="Twitter" class="externalLink">Twitter </a>
						</li>
						<li>
							<a href="mailto:jan@kotek.net" title="Email" class="externalLink">Email </a>
						</li>
						<li>
							<a href="http://www.kotek.net" title="About" class="externalLink">About </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote><span class="color-highlight">MapDB</span> provides concurrent Maps, Sets and Queues backed by disk storage or off-heap memory.
It is a fast and easy to use embedded Java database engine. And it is completely free under Apache License.
MapDB is free as speech and free as beer under <a href="https://github.com/jankotek/MapDB/blob/master/license.txt">Apache License 2.0</a>.</blockquote>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2013. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 0.9.4-SNAPSHOT. </span><span class="publishDate">Last Published: 2013-08-02. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='http://andriusvelykis.github.com/reflow-maven-skin//js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<script src="http://andriusvelykis.github.com/reflow-maven-skin//js/lightbox.js"></script>
	<script src="http://andriusvelykis.github.com/reflow-maven-skin//js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="http://andriusvelykis.github.com/reflow-maven-skin//js/jquery.ba-bbq.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="http://andriusvelykis.github.com/reflow-maven-skin//js/reflow-skin.js"></script>
	
	</body>
</html>
